{"version":3,"file":"dataset-search-component.js","sources":["../src/DatasetSearchWidget.vue"],"sourcesContent":["<template>\n  <div class=\"dkan-widget-container\">\n    <header class=\"dkan-widget-header\">\n      <h2>DKAN Dataset Search (Vue)</h2>\n      <p>Demonstrating @dkan-client-tools/vue with Runtime-Only Build (28% smaller!)</p>\n    </header>\n\n    <div class=\"dkan-widget-body\">\n      <!-- Search Box -->\n      <div class=\"search-box\">\n        <input\n          type=\"text\"\n          class=\"search-input\"\n          placeholder=\"Search datasets...\"\n          v-model=\"searchTerm\"\n          @input=\"resetToFirstPage\"\n        />\n      </div>\n\n      <!-- Loading State -->\n      <div v-if=\"isLoading\" class=\"loading\">\n        Loading datasets...\n      </div>\n\n      <!-- Error State -->\n      <div v-else-if=\"isError\" class=\"error\">\n        Error: {{ error?.message }}\n      </div>\n\n      <!-- Results -->\n      <div v-else class=\"results\">\n        <!-- No Results -->\n        <div v-if=\"datasets.length === 0\" class=\"no-results\">\n          No datasets found.\n        </div>\n\n        <!-- Results List -->\n        <div v-else>\n          <div class=\"results-info\">\n            Found {{ totalResults }} datasets (Page {{ page }} of {{ totalPages || 1 }})\n          </div>\n\n          <div class=\"dataset-items\">\n            <div\n              v-for=\"dataset in datasets\"\n              :key=\"dataset.identifier\"\n              class=\"dataset-card\"\n              :class=\"{ expanded: expandedCard === dataset.identifier }\"\n              @click=\"toggleCard(dataset.identifier)\"\n            >\n              <!-- Card Header -->\n              <div class=\"card-header\">\n                <h3>{{ dataset.title }}</h3>\n                <span class=\"expand-icon\">{{ expandedCard === dataset.identifier ? 'âˆ’' : '+' }}</span>\n              </div>\n\n              <!-- Description -->\n              <p v-if=\"dataset.description\" class=\"description\">\n                {{ expandedCard === dataset.identifier ? dataset.description : truncateDescription(dataset.description) }}\n              </p>\n\n              <!-- Metadata -->\n              <div class=\"metadata\">\n                <span class=\"tag\">{{ dataset.accessLevel }}</span>\n                <span v-if=\"dataset.modified\" class=\"modified\">\n                  Modified: {{ formatDate(dataset.modified) }}\n                </span>\n              </div>\n\n              <!-- Keywords -->\n              <div v-if=\"dataset.keyword && dataset.keyword.length > 0\" class=\"keywords\">\n                <span v-for=\"(keyword, index) in dataset.keyword\" :key=\"index\" class=\"keyword\">\n                  {{ keyword }}\n                </span>\n              </div>\n\n              <!-- Expanded Details -->\n              <div v-if=\"expandedCard === dataset.identifier\" class=\"expanded-details\">\n                <div v-if=\"dataset.identifier\" class=\"detail-row\">\n                  <strong>Identifier:</strong>\n                  <span>{{ dataset.identifier }}</span>\n                </div>\n\n                <div v-if=\"dataset.publisher\" class=\"detail-row\">\n                  <strong>Publisher:</strong>\n                  <span>{{ dataset.publisher.name }}</span>\n                </div>\n\n                <div v-if=\"dataset.theme && dataset.theme.length > 0\" class=\"detail-row\">\n                  <strong>Theme:</strong>\n                  <span>{{ dataset.theme.join(', ') }}</span>\n                </div>\n\n                <div v-if=\"dataset.issued\" class=\"detail-row\">\n                  <strong>Issued:</strong>\n                  <span>{{ formatDate(dataset.issued) }}</span>\n                </div>\n\n                <div v-if=\"dataset.contactPoint\" class=\"detail-row\">\n                  <strong>Contact:</strong>\n                  <span>{{ formatContactPoint(dataset.contactPoint) }}</span>\n                </div>\n\n                <div v-if=\"dataset.distribution && dataset.distribution.length > 0\" class=\"detail-row\">\n                  <strong>Distributions:</strong>\n                  <div class=\"distributions\">\n                    <div\n                      v-for=\"(dist, index) in dataset.distribution\"\n                      :key=\"index\"\n                      class=\"distribution-item\"\n                    >\n                      <span class=\"distribution-title\">{{ dist.title || `Distribution ${index + 1}` }}</span>\n                      <span v-if=\"dist.format\" class=\"distribution-format\">{{ dist.format }}</span>\n                    </div>\n                  </div>\n                </div>\n\n                <div v-if=\"dataset.license\" class=\"detail-row\">\n                  <strong>License:</strong>\n                  <a :href=\"dataset.license\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    {{ dataset.license }}\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Pagination -->\n          <div v-if=\"totalPages > 1\" class=\"pagination\">\n            <button\n              class=\"prev-btn\"\n              :disabled=\"page === 1\"\n              @click=\"previousPage\"\n            >\n              Previous\n            </button>\n            <span class=\"page-info\">Page {{ page }} of {{ totalPages }}</span>\n            <button\n              class=\"next-btn\"\n              :disabled=\"page === totalPages\"\n              @click=\"nextPage\"\n            >\n              Next\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { useDatasetSearch } from '@dkan-client-tools/vue'\n\n// Props\nconst props = defineProps({\n  baseUrl: {\n    type: String,\n    required: true,\n  },\n})\n\n// State\nconst searchTerm = ref('')\nconst page = ref(1)\nconst expandedCard = ref(null)\nconst pageSize = 10\n\n// Use dataset search composable\nconst { data, isLoading, isError, error } = useDatasetSearch({\n  searchOptions: computed(() => ({\n    fulltext: searchTerm.value || undefined,\n    page: page.value,\n    'page-size': pageSize,\n  })),\n  enabled: true,\n})\n\n// Computed\nconst datasets = computed(() => data.value?.results || [])\nconst totalResults = computed(() => data.value?.total || 0)\nconst totalPages = computed(() => Math.ceil(totalResults.value / pageSize))\n\n// Methods\nfunction resetToFirstPage() {\n  page.value = 1\n  expandedCard.value = null\n}\n\nfunction toggleCard(identifier) {\n  expandedCard.value = expandedCard.value === identifier ? null : identifier\n}\n\nfunction previousPage() {\n  if (page.value > 1) {\n    page.value--\n    expandedCard.value = null\n  }\n}\n\nfunction nextPage() {\n  if (page.value < totalPages.value) {\n    page.value++\n    expandedCard.value = null\n  }\n}\n\nfunction truncateDescription(description) {\n  if (!description) return ''\n  return description.length > 200 ? description.substring(0, 200) + '...' : description\n}\n\nfunction formatDate(dateString) {\n  return new Date(dateString).toLocaleDateString()\n}\n\nfunction formatContactPoint(contactPoint) {\n  if (!contactPoint) return ''\n  let result = contactPoint.fn\n  if (contactPoint.hasEmail) {\n    result += ` (${contactPoint.hasEmail.replace('mailto:', '')})`\n  }\n  return result\n}\n</script>\n\n<style scoped>\n/* Styles will be in separate CSS file */\n</style>\n"],"names":["searchTerm","ref","page","expandedCard","data","isLoading","isError","error","useDatasetSearch","searchOptions","computed","fulltext","value","enabled","datasets","results","totalResults","total","totalPages","Math","ceil","resetToFirstPage","previousPage","nextPage","formatDate","dateString","Date","toLocaleDateString","formatContactPoint","contactPoint","result","fn","hasEmail","replace","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","class","_hoisted_2","_hoisted_3","type","placeholder","$event","onInput","_unref","_hoisted_4","_hoisted_5","_toDisplayString","message","_hoisted_6","length","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_Fragment","_renderList","dataset","key","identifier","expanded","onClick","toggleCard","_hoisted_12","title","_hoisted_13","description","_hoisted_14","substring","_hoisted_15","_hoisted_16","accessLevel","modified","_hoisted_17","keyword","_hoisted_18","index","_hoisted_19","_hoisted_20","_cache","publisher","_hoisted_21","name","theme","_hoisted_22","join","issued","_hoisted_23","_hoisted_24","distribution","_hoisted_25","_hoisted_26","dist","_hoisted_27","format","_hoisted_28","license","_hoisted_29","href","target","rel","_hoisted_30","_hoisted_31","disabled","_hoisted_32","_hoisted_33","_hoisted_34"],"mappings":"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"}