var DatasetSearchComponent=function(e,t){"use strict";const l={class:"dkan-widget-container"},n={class:"dkan-widget-body"},a={class:"search-box"},o={key:0,class:"loading"},r={key:1,class:"error"},i={key:2,class:"results"},c={key:0,class:"no-results"},s={key:1},d={class:"results-info"},u={class:"dataset-items"},m=["onClick"],p={class:"card-header"},k={class:"expand-icon"},v={key:0,class:"description"},E={class:"metadata"},g={class:"tag"},B={key:0,class:"modified"},y={key:1,class:"keywords"},V={key:2,class:"expanded-details"},N={key:0,class:"detail-row"},f={key:1,class:"detail-row"},h={key:2,class:"detail-row"},D={key:3,class:"detail-row"},S={key:4,class:"detail-row"},b={key:5,class:"detail-row"},C={class:"distributions"},w={class:"distribution-title"},x={key:0,class:"distribution-format"},L={key:6,class:"detail-row"},_=["href"],P={key:0,class:"pagination"},F=["disabled"],I={class:"page-info"},T=["disabled"];return((e,t)=>{const l=e.__vccOpts||e;for(const[n,a]of t)l[n]=a;return l})({__name:"DatasetSearchWidget",props:{baseUrl:{type:String,required:!0}},setup(M){const O=e.ref(""),z=e.ref(1),U=e.ref(null),{data:$,isLoading:j,isError:q,error:A}=t.useDatasetSearch({searchOptions:e.computed(()=>({fulltext:O.value||void 0,page:z.value,"page-size":10})),enabled:!0}),K=e.computed(()=>$.value?.results||[]),R=e.computed(()=>$.value?.total||0),W=e.computed(()=>Math.ceil(R.value/10));function G(){z.value=1,U.value=null}function H(){z.value>1&&(z.value--,U.value=null)}function J(){z.value<W.value&&(z.value++,U.value=null)}function Q(e){return new Date(e).toLocaleDateString()}function X(e){if(!e)return"";let t=e.fn;return e.hasEmail&&(t+=` (${e.hasEmail.replace("mailto:","")})`),t}return(t,M)=>(e.openBlock(),e.createElementBlock("div",l,[M[8]||(M[8]=e.createElementVNode("header",{class:"dkan-widget-header"},[e.createElementVNode("h2",null,"DKAN Dataset Search (Vue)"),e.createElementVNode("p",null,"Demonstrating @dkan-client-tools/vue with Runtime-Only Build (28% smaller!)")],-1)),e.createElementVNode("div",n,[e.createElementVNode("div",a,[e.withDirectives(e.createElementVNode("input",{type:"text",class:"search-input",placeholder:"Search datasets...","onUpdate:modelValue":M[0]||(M[0]=e=>O.value=e),onInput:G},null,544),[[e.vModelText,O.value]])]),e.unref(j)?(e.openBlock(),e.createElementBlock("div",o," Loading datasets... ")):e.unref(q)?(e.openBlock(),e.createElementBlock("div",r," Error: "+e.toDisplayString(e.unref(A)?.message),1)):(e.openBlock(),e.createElementBlock("div",i,[0===K.value.length?(e.openBlock(),e.createElementBlock("div",c," No datasets found. ")):(e.openBlock(),e.createElementBlock("div",s,[e.createElementVNode("div",d," Found "+e.toDisplayString(R.value)+" datasets (Page "+e.toDisplayString(z.value)+" of "+e.toDisplayString(W.value||1)+") ",1),e.createElementVNode("div",u,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(K.value,t=>{return e.openBlock(),e.createElementBlock("div",{key:t.identifier,class:e.normalizeClass(["dataset-card",{expanded:U.value===t.identifier}]),onClick:e=>{return l=t.identifier,void(U.value=U.value===l?null:l);var l}},[e.createElementVNode("div",p,[e.createElementVNode("h3",null,e.toDisplayString(t.title),1),e.createElementVNode("span",k,e.toDisplayString(U.value===t.identifier?"âˆ’":"+"),1)]),t.description?(e.openBlock(),e.createElementBlock("p",v,e.toDisplayString(U.value===t.identifier?t.description:(l=t.description,l?l.length>200?l.substring(0,200)+"...":l:"")),1)):e.createCommentVNode("",!0),e.createElementVNode("div",E,[e.createElementVNode("span",g,e.toDisplayString(t.accessLevel),1),t.modified?(e.openBlock(),e.createElementBlock("span",B," Modified: "+e.toDisplayString(Q(t.modified)),1)):e.createCommentVNode("",!0)]),t.keyword&&t.keyword.length>0?(e.openBlock(),e.createElementBlock("div",y,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.keyword,(t,l)=>(e.openBlock(),e.createElementBlock("span",{key:l,class:"keyword"},e.toDisplayString(t),1))),128))])):e.createCommentVNode("",!0),U.value===t.identifier?(e.openBlock(),e.createElementBlock("div",V,[t.identifier?(e.openBlock(),e.createElementBlock("div",N,[M[1]||(M[1]=e.createElementVNode("strong",null,"Identifier:",-1)),e.createElementVNode("span",null,e.toDisplayString(t.identifier),1)])):e.createCommentVNode("",!0),t.publisher?(e.openBlock(),e.createElementBlock("div",f,[M[2]||(M[2]=e.createElementVNode("strong",null,"Publisher:",-1)),e.createElementVNode("span",null,e.toDisplayString(t.publisher.name),1)])):e.createCommentVNode("",!0),t.theme&&t.theme.length>0?(e.openBlock(),e.createElementBlock("div",h,[M[3]||(M[3]=e.createElementVNode("strong",null,"Theme:",-1)),e.createElementVNode("span",null,e.toDisplayString(t.theme.join(", ")),1)])):e.createCommentVNode("",!0),t.issued?(e.openBlock(),e.createElementBlock("div",D,[M[4]||(M[4]=e.createElementVNode("strong",null,"Issued:",-1)),e.createElementVNode("span",null,e.toDisplayString(Q(t.issued)),1)])):e.createCommentVNode("",!0),t.contactPoint?(e.openBlock(),e.createElementBlock("div",S,[M[5]||(M[5]=e.createElementVNode("strong",null,"Contact:",-1)),e.createElementVNode("span",null,e.toDisplayString(X(t.contactPoint)),1)])):e.createCommentVNode("",!0),t.distribution&&t.distribution.length>0?(e.openBlock(),e.createElementBlock("div",b,[M[6]||(M[6]=e.createElementVNode("strong",null,"Distributions:",-1)),e.createElementVNode("div",C,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.distribution,(t,l)=>(e.openBlock(),e.createElementBlock("div",{key:l,class:"distribution-item"},[e.createElementVNode("span",w,e.toDisplayString(t.title||`Distribution ${l+1}`),1),t.format?(e.openBlock(),e.createElementBlock("span",x,e.toDisplayString(t.format),1)):e.createCommentVNode("",!0)]))),128))])])):e.createCommentVNode("",!0),t.license?(e.openBlock(),e.createElementBlock("div",L,[M[7]||(M[7]=e.createElementVNode("strong",null,"License:",-1)),e.createElementVNode("a",{href:t.license,target:"_blank",rel:"noopener noreferrer"},e.toDisplayString(t.license),9,_)])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)],10,m);var l}),128))]),W.value>1?(e.openBlock(),e.createElementBlock("div",P,[e.createElementVNode("button",{class:"prev-btn",disabled:1===z.value,onClick:H}," Previous ",8,F),e.createElementVNode("span",I,"Page "+e.toDisplayString(z.value)+" of "+e.toDisplayString(W.value),1),e.createElementVNode("button",{class:"next-btn",disabled:z.value===W.value,onClick:J}," Next ",8,T)])):e.createCommentVNode("",!0)]))]))])]))}},[["__scopeId","data-v-f9705d14"]])}(DkanClientToolsVue.Vue,DkanClientToolsVue);
//# sourceMappingURL=dataset-search-component.js.map
